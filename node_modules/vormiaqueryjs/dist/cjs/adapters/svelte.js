"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("svelte/store"),e=require("../client/createVormiaClient.js"),s=require("../client/utils/VormiaError.js");exports.createVormiaStore=function(o={}){const t=e.getGlobalVormiaClient(),{subscribe:i,set:a,update:n}=r.writable({data:null,error:null,isLoading:!1,isError:!1,isSuccess:!1});async function c(r={}){var e,i;const c={...o,...r},{endpoint:u,method:l="GET",params:d,data:m,headers:E,transform:p,onSuccess:v,onError:b}=c;n(r=>({...r,isLoading:!0,isError:!1,isSuccess:!1}));try{const r={method:l,params:"GET"===l?d:void 0,data:"GET"!==l?m||d:void 0,headers:E};let e=(await t.request({url:u,...r})).data;p&&(e=p(e));const s={data:e,error:null,isLoading:!1,isError:!1,isSuccess:!0};return a(s),v&&v(s),s}catch(f){const r=f instanceof Error?f.message:"An unknown error occurred",o=null==(e=null==f?void 0:f.response)?void 0:e.status,t=null==(i=null==f?void 0:f.response)?void 0:i.data,n=f instanceof s.VormiaError?f:new s.VormiaError(r,o,t);throw a({data:null,error:n,isLoading:!1,isError:!0,isSuccess:!1}),b&&b(n),n}}return!1!==o.immediate&&c(),{subscribe:i,fetch:c,refetch:c,set:a,update:n}};
//# sourceMappingURL=svelte.js.map
