{"version":3,"file":"react.js","sources":["../../../src/adapters/react/useVormiaQuery.js"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\nimport { getGlobalVormiaClient } from '../../client/createVormiaClient';\nimport { VormiaError } from '../../client/utils/VormiaError';\n\nexport function useVormiaQuery(options) {\n  const client = getGlobalVormiaClient();\n  const {\n    endpoint,\n    method = 'GET',\n    params,\n    data: bodyData,\n    headers,\n    transform,\n    enabled = true,\n    ...queryOptions\n  } = options;\n\n  const queryKey = [endpoint, method, params, bodyData, headers];\n\n  const queryFn = async () => {\n    try {\n      const config = {\n        method,\n        params: method === 'GET' ? params : undefined,\n        data: method !== 'GET' ? (bodyData || params) : undefined,\n        headers\n      };\n\n      const response = await client.request({\n        url: endpoint,\n        ...config\n      });\n\n      if (transform) {\n        response.data = transform(response.data);\n      }\n\n      return response.data;\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred';\n      const status = error?.response?.status;\n      const errorData = error?.response?.data;\n      \n      throw new VormiaError(\n        errorMessage,\n        status,\n        errorData\n      );\n    }\n  };\n\n  return useQuery({\n    queryKey,\n    queryFn,\n    enabled,\n    ...queryOptions\n  });\n}\n"],"names":["options","client","getGlobalVormiaClient","endpoint","method","params","data","bodyData","headers","transform","enabled","queryOptions","queryKey","useQuery","queryFn","async","config","response","request","url","error","errorMessage","Error","message","status","_a","errorData","_b","VormiaError"],"mappings":"yOAIO,SAAwBA,GAC7B,MAAMC,EAASC,EAAAA,yBACTC,SACJA,EAAAC,OACAA,EAAS,MAAAC,OACTA,EACAC,KAAMC,EAAAC,QACNA,EAAAC,UACAA,EAAAC,QACAA,GAAU,KACPC,GACDX,EAEEY,EAAW,CAACT,EAAUC,EAAQC,EAAQE,EAAUC,GAkCtD,OAAOK,WAAS,CACdD,WACAE,QAlCcC,kBACd,IACE,MAAMC,EAAS,CACbZ,SACAC,OAAmB,QAAXD,EAAmBC,OAAS,EACpCC,KAAiB,QAAXF,EAAoBG,GAAYF,OAAU,EAChDG,WAGIS,QAAiBhB,EAAOiB,QAAQ,CACpCC,IAAKhB,KACFa,IAOL,OAJIP,IACFQ,EAASX,KAAOG,EAAUQ,EAASX,OAG9BW,EAASX,IACtB,OAAac,GACP,MAAMC,EAAeD,aAAiBE,MAAQF,EAAMG,QAAU,4BACxDC,EAAS,OAAAC,EAAA,MAAAL,OAAA,EAAAA,EAAOH,eAAP,EAAAQ,EAAiBD,OAC1BE,EAAY,OAAAC,EAAA,MAAAP,OAAA,EAAAA,EAAOH,eAAP,EAAAU,EAAiBrB,KAEnC,MAAM,IAAIsB,EAAAA,YACRP,EACAG,EACAE,EAER,GAMIhB,aACGC,GAEP"}