"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("@tanstack/react-query"),e=require("../client/createVormiaClient.js");exports.useVrmAuth=o=>{const n=e.getGlobalVormiaClient(),{endpoint:r,method:a="POST",headers:s={},transform:u,encryptData:c=!1,storeToken:i=!0,onLoginSuccess:d,onSuccess:l,onError:h,...m}=o,y=t.useMutation({mutationFn:async t=>{var e;try{const o={method:a,url:r,data:t,headers:{"Content-Type":"application/json",...s},encryptData:c},d=await n.request(o);return i&&(null==(e=d.data)?void 0:e.token)&&n.setAuthToken(d.data.token),u&&"function"==typeof u?{...d,data:u(d.data)}:d}catch(o){throw 401===o.status&&n.removeAuthToken(),o instanceof Error?o:new Error("Authentication failed")}},onSuccess:(t,e,o)=>{var n;l&&l(t,e,o),d&&(null==(n=t.data)?void 0:n.token)&&d(t)},onError:(t,e,o)=>{h&&h(t,e,o)},...m}),p=!!n.getAuthToken();return{...y,login:async t=>y.mutateAsync(t),logout:()=>{n.removeAuthToken()},isAuthenticated:p}};
//# sourceMappingURL=useVrmAuth.js.map
