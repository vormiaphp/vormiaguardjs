{"version":3,"file":"react.mjs","sources":["../../../src/adapters/react/useVormiaQuery.js"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\nimport { getGlobalVormiaClient } from '../../client/createVormiaClient';\nimport { VormiaError } from '../../client/utils/VormiaError';\n\nexport function useVormiaQuery(options) {\n  const client = getGlobalVormiaClient();\n  const {\n    endpoint,\n    method = 'GET',\n    params,\n    data: bodyData,\n    headers,\n    transform,\n    enabled = true,\n    ...queryOptions\n  } = options;\n\n  const queryKey = [endpoint, method, params, bodyData, headers];\n\n  const queryFn = async () => {\n    try {\n      const config = {\n        method,\n        params: method === 'GET' ? params : undefined,\n        data: method !== 'GET' ? (bodyData || params) : undefined,\n        headers\n      };\n\n      const response = await client.request({\n        url: endpoint,\n        ...config\n      });\n\n      if (transform) {\n        response.data = transform(response.data);\n      }\n\n      return response.data;\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred';\n      const status = error?.response?.status;\n      const errorData = error?.response?.data;\n      \n      throw new VormiaError(\n        errorMessage,\n        status,\n        errorData\n      );\n    }\n  };\n\n  return useQuery({\n    queryKey,\n    queryFn,\n    enabled,\n    ...queryOptions\n  });\n}\n"],"names":[],"mappings":";;;AAIO,SAAS,eAAe,SAAS;AACtC,QAAM,SAAS,sBAAqB;AACpC,QAAM;AAAA,IACJ;AAAA,IACA,SAAS;AAAA,IACT;AAAA,IACA,MAAM;AAAA,IACN;AAAA,IACA;AAAA,IACA,UAAU;AAAA,IACV,GAAG;AAAA,EACP,IAAM;AAEJ,QAAM,WAAW,CAAC,UAAU,QAAQ,QAAQ,UAAU,OAAO;AAE7D,QAAM,UAAU,YAAY;;AAC1B,QAAI;AACF,YAAM,SAAS;AAAA,QACb;AAAA,QACA,QAAQ,WAAW,QAAQ,SAAS;AAAA,QACpC,MAAM,WAAW,QAAS,YAAY,SAAU;AAAA,QAChD;AAAA,MACR;AAEM,YAAM,WAAW,MAAM,OAAO,QAAQ;AAAA,QACpC,KAAK;AAAA,QACL,GAAG;AAAA,MACX,CAAO;AAED,UAAI,WAAW;AACb,iBAAS,OAAO,UAAU,SAAS,IAAI;AAAA,MAC/C;AAEM,aAAO,SAAS;AAAA,IACtB,SAAa,OAAO;AACd,YAAM,eAAe,iBAAiB,QAAQ,MAAM,UAAU;AAC9D,YAAM,UAAS,oCAAO,aAAP,mBAAiB;AAChC,YAAM,aAAY,oCAAO,aAAP,mBAAiB;AAEnC,YAAM,IAAI;AAAA,QACR;AAAA,QACA;AAAA,QACA;AAAA,MACR;AAAA,IACA;AAAA,EACA;AAEE,SAAO,SAAS;AAAA,IACd;AAAA,IACA;AAAA,IACA;AAAA,IACA,GAAG;AAAA,EACP,CAAG;AACH;"}