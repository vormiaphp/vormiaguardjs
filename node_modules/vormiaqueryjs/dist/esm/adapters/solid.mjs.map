{"version":3,"file":"solid.mjs","sources":["../../../src/adapters/solid/createVormiaResource.js"],"sourcesContent":["import { createResource } from \"solid-js\";\nimport { getGlobalVormiaClient } from \"../../client/createVormiaClient\";\nimport { VormiaError } from \"../../client/utils/VormiaError\";\n\nexport function createVormiaResource(options) {\n  const client = getGlobalVormiaClient();\n  const {\n    endpoint,\n    method = \"GET\",\n    params,\n    data: bodyData,\n    headers,\n    transform,\n    ...resourceOptions\n  } = options;\n\n  const fetchData = async () => {\n    try {\n      const config = {\n        method,\n        params: method === \"GET\" ? params : undefined,\n        data: method !== \"GET\" ? bodyData || params : undefined,\n        headers,\n      };\n\n      const response = await client.request({\n        url: endpoint,\n        ...config,\n      });\n\n      let result = response.data;\n\n      if (transform) {\n        result = transform(result);\n      }\n\n      return result;\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : \"An unknown error occurred\";\n      const status = error?.response?.status;\n      const errorData = error?.response?.data;\n\n      throw new VormiaError(errorMessage, status, errorData);\n    }\n  };\n\n  const [resource] = createResource(\n    resourceOptions.autoFetch !== false ? fetchData : undefined,\n    resourceOptions\n  );\n\n  const enhancedRefetch = async (opts = {}) => {\n    const mergedOptions = { ...options, ...opts };\n    const response = await fetchData(mergedOptions);\n    return response;\n  };\n\n  return [resource, { ...resource.actions, refetch: enhancedRefetch }];\n}\n"],"names":[],"mappings":";;;AAIO,SAAS,qBAAqB,SAAS;AAC5C,QAAM,SAAS,sBAAqB;AACpC,QAAM;AAAA,IACJ;AAAA,IACA,SAAS;AAAA,IACT;AAAA,IACA,MAAM;AAAA,IACN;AAAA,IACA;AAAA,IACA,GAAG;AAAA,EACP,IAAM;AAEJ,QAAM,YAAY,YAAY;;AAC5B,QAAI;AACF,YAAM,SAAS;AAAA,QACb;AAAA,QACA,QAAQ,WAAW,QAAQ,SAAS;AAAA,QACpC,MAAM,WAAW,QAAQ,YAAY,SAAS;AAAA,QAC9C;AAAA,MACR;AAEM,YAAM,WAAW,MAAM,OAAO,QAAQ;AAAA,QACpC,KAAK;AAAA,QACL,GAAG;AAAA,MACX,CAAO;AAED,UAAI,SAAS,SAAS;AAEtB,UAAI,WAAW;AACb,iBAAS,UAAU,MAAM;AAAA,MACjC;AAEM,aAAO;AAAA,IACb,SAAa,OAAO;AACd,YAAM,eACJ,iBAAiB,QAAQ,MAAM,UAAU;AAC3C,YAAM,UAAS,oCAAO,aAAP,mBAAiB;AAChC,YAAM,aAAY,oCAAO,aAAP,mBAAiB;AAEnC,YAAM,IAAI,YAAY,cAAc,QAAQ,SAAS;AAAA,IAC3D;AAAA,EACA;AAEE,QAAM,CAAC,QAAQ,IAAI;AAAA,IACjB,gBAAgB,cAAc,QAAQ,YAAY;AAAA,IAClD;AAAA,EACJ;AAEE,QAAM,kBAAkB,OAAO,OAAO,OAAO;AAC/C,KAA0B,EAAE,GAAG,SAAS,GAAG,KAAI;AAC3C,UAAM,WAAW,MAAM,UAAuB;AAC9C,WAAO;AAAA,EACX;AAEE,SAAO,CAAC,UAAU,EAAE,GAAG,SAAS,SAAS,SAAS,iBAAiB;AACrE;"}